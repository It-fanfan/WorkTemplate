<!DOCTYPE html>
<html>
	<head>
			<meta charset="UTF-8">
			<title>用户留存趋势</title>
			<meta name="renderer" content="webkit">
			<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
			<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
			<link rel="stylesheet" href="../layuiadmin/layui/css/layui.css" media="all">
			<link rel="stylesheet" href="../layuiadmin/style/admin.css" media="all">
			<script src="../layuiadmin/layui/layui.js"></script>
			<script src="../layuiadmin/modules/operation.js"></script>
			<script></script>
		</head>
		<body>
			<div class="layui-fluid">
				<div class="layui-row layui-col-space15">
					<div class="layui-col-md12">
						<div class="layui-card">
							<!-- 搜索表单 -->
							<div class="layui-form layui-card-header layuiadmin-card-header-auto">
								<form class="layui-form-item" id="search-form">
									<div class="layui-inline">
										<label class="layui-form-label">时间查询</label>
										<div class="layui-input-inline">
											<input type="text" class="layui-input" id="times" name="times" placeholder=" - ">
										</div>
									</div>
									<input type="hidden" name="search-data" value="time" />
									<div class="layui-inline">
										<button class="layui-btn layuiadmin-btn-useradmin" lay-submit="" lay-filter="front-search">
											<i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
										</button>
									</div>
								</form>
							</div>
	
							<!-- 数据表格 -->
							<div class="layui-card-body">
								<table class="layui-hide" lay-filter="table-page" id="table-page"></table>
							</div>
	
						</div>
					</div>
				</div>
			</div>
			</div>
	
	<script type="text/html" id="toolbar">
	</script>
			<script>
			var operatorurl = '../admin/wechat/select';
			layui.use(['table', 'laydate', 'form', 'layer'], function () {
	        var table = layui.table,
	            form = layui.form,
	            layer = layui.layer,
	            laydate = layui.laydate;
	
	        table.render({
	            elem: '#table-page',
				autoSort:false,
	            url: operatorurl + '?datagrid=data',
	            cols: [[
	                {field: 'insertTime', width: 120, title: '日期', sort: true},	                
	                {field: 'keepDay1', width: 120, title: '次日留存率 (%)', sort: true,templet:(d)=>{
						if(d.keepDay1 == -1)
							return "-";
						return d.keepDay1 + "%";
					}},
	                {field: 'keepDay3', width: 120, title: '三日留存率 (%)', sort: true,templet:(d)=>{
						if(d.keepDay3 == -1)
							return "-";
						return d.keepDay3 + "%";
					}},
					{field: 'keepDay7', width: 120, title: '七日留存率 (%)', sort: true,templet:(d)=>{
						if(d.keepDay7 == -1)
							return "-";
						return d.keepDay7 + "%";
					}}          
	            ]],
	            page: true,
	            toolbar: '#toolbar',
	            defaultToolbar: ['filter', 'exports']
	        });

				laydate.render({
					elem: '#times',
					range: true
				});
	
	        laydate.render({
	            elem: '#insertTime',
				format: 'yyyy/MM/dd'
	
	        });
	    })
	
	</script>	
	</body>
</html>
