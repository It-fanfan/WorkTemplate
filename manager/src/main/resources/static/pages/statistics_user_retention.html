<!DOCTYPE html>
<html lang="chs">
	<head>
		<meta charset="UTF-8">
		<title>留存&流失</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../layuiadmin/layui/css/layui.css" media="all">
		<link rel="stylesheet" href="../layuiadmin/style/admin.css" media="all">
		<script src="../layuiadmin/layui/layui.js"></script>
		<script src="../layuiadmin/modules/operation.js"></script>
		<style type="text/css">
			.layui-form .layui-table-cell {
				height: auto;
				overflow: visible;
				text-overflow: inherit;
				white-space: normal;
			}
		</style>
	</head>
	<body>
		<div class="layui-fluid">
			<div class="layui-row layui-col-space15">
				<div class="layui-col-md12">
					<div class="layui-card">

						<div class="layui-form layui-card-header layuiadmin-card-header-auto">
							<form class="layui-form-item" id="search-form">
								<div class="layui-inline">
									<label class="layui-form-label">时间范围</label>
									<div class="layui-input-inline">
										<input type="text" class="layui-input" id="times" name="times" placeholder=" - ">
									</div>
								</div>
								<div class="layui-inline">
									<button class="layui-btn layuiadmin-btn-useradmin" lay-submit="" lay-filter="front-search">
										<i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
									</button>
								</div>
							</form>
						</div>

						<!-- 数据表格 -->
						<div class="layui-card-body">
							<table class="layui-hide" lay-filter="table-page" id="table-page"></table>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
		<script type="text/html" id="toolbar">
		</script>
		<script>
			var operatorurl = '../admin/statistics/retention';
			layui.use(['table', 'laydate', 'form', 'layer'], () => {
				var $ = layui.jquery,
					table = layui.table,
					form = layui.form,
					layer = layui.layer,
					laydate = layui.laydate;
				laydate.render({
					elem: '#times',
					range: true
				});
				table.render({
					elem: '#table-page',
					autoSort:false,
					url: operatorurl + '?datagrid=data',
					cols: [
						[{
								field: 'newDate',
								width: 120,
								title: '日期',
								sort: true
							},
							{
								field: 'retained1',
								width: 140,
								title: '次日留存率',
								sort: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained1, d.newUser)
								}
							},
							{
								field: 'retained2',
								width: 140,
								title: '2日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained2, d.newUser)
								}
							},
							{
								field: 'retained3',
								width: 140,
								title: '三日留存率',
								sort: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained3, d.newUser)
								}
							},
							{
								field: 'retained4',
								width: 140,
								title: '4日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained4, d.newUser)
								}
							},
							{
								field: 'retained5',
								width: 140,
								title: '5日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained5, d.newUser)
								}
							},
							{
								field: 'retained6',
								width: 140,
								title: '6日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained6, d.newUser)
								}
							},
							{
								field: 'retained7',
								width: 140,
								title: '7日留存率',
								sort: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained7, d.newUser)
								}
							},
							{
								field: 'retained8',
								width: 140,
								title: '8日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained8, d.newUser)
								}
							},
							{
								field: 'retained9',
								width: 140,
								title: '9日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained9, d.newUser)
								}
							},
							{
								field: 'retained10',
								width: 140,
								title: '10日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained10, d.newUser)
								}
							},
							{
								field: 'retained11',
								width: 140,
								title: '11日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained11, d.newUser)
								}
							},
							{
								field: 'retained12',
								width: 140,
								title: '12日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained12, d.newUser)
								}
							},
							{
								field: 'retained13',
								width: 140,
								title: '13日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained13, d.newUser)
								}
							},
							{
								field: 'retained14',
								width: 140,
								title: '14日留存率',
								sort: true,
								hide: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained14, d.newUser)
								}
							},
							{
								field: 'retained15',
								width: 140,
								title: '15日留存率',
								sort: true,
								templet: (d) => {
									return UIConfig.divideByPercent(d.retained15, d.newUser)
								}
							}

						]
					],
					page: true,
					toolbar: '#toolbar',
					defaultToolbar: ['filter', 'exports']
				});
			})
		</script>
	</body>
</html>
